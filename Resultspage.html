<!DOCTYPE html>
<html>
<head>
	<title>Camping</title>
	<link href="https://fonts.googleapis.com/css?family=Anton" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Bree+Serif|Fredoka+One|Righteous" rel="stylesheet">
	<link rel="stylesheet" href="assets/css/resultspage.css">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>


<body>
	<div class="container">
		<div class="header-box">
			<div class="logo">
				<center><img src="assets/images/logo.png" style="height:100px; width:100px;"></center>
			</div>
				<center><p>CAMPING HUBS</p></center>
		<div class="box">
				<div class="container-1">
						<span class="object"><i class="fa fa-search"></i></span>
									<input type="search" id="search" placeholder="Search..." />
								</div>
						</div>
			</div>

			<div class="row">
					<div class="col-md-4 col-md-offset-1">
							<div id="results">
									<div class="panel panel-default">
										<div class="panel-heading">
										<h3 class="panel-title">Results</h3>
										</div>
												<div class="panel-body">
											</div>
										</div>
									</div>
								</div>

			<div class="col-md-4 col-md-offset-2">
						<div id="map">
							</div>
						</div>
					</div>


		</div>



		<div class="row">
			<div class="col-md-12">
				<div id="foot">
				<footer>
					<a href="https://www.facebook.com/nationalparkservice/" class="icon icon-mono facebook"></a>
					<a href="https://twitter.com/NatlParkService?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" class="icon icon-mono twitter"></a>
					<a href="https://github.com/lchambers6/FirstGroupProject" class="icon icon-mono github"></a>
				</footer>
			</div>
		</div>
	</div>
<!-- Google Map JS -->
<script>

// Google Map API call and functions

//  VARIABLES
//----------------------------------------------

//  Initialize vars for api connectivity
var apiKey = "AIzaSyDewJP5LDBqFfsHhOFECYVRIjO6wS8uD9U";
var state = ""			// state var from google for camp
var homeLat = ""; 		// Latitude from googleAPI 
var homeLng = "";		// Longitude from googleAPI
var homeLoc = [];		// Lat Long object for map centering
var campName = "";		// name of site from camping api (is this needed here?)

//  FUNCTIONS
//----------------------------------------------

// Builds google api query url
function googleUrl(address) {
  var googleURL = "https://maps.googleapis.com/maps/api/geocode/json?address=" + address + "&key=" + apiKey + "&callback=initMap";
  googleAPI(googleURL);
  // Log for testing delete later ####################
  console.log(googleURL);
};

// Initialize Google Map API
function googleAPI(googleURL) {
	$.ajax({
		url: googleURL,
		method: "GET",
		dataType: "json",
	}).done(function(response){
		console.log(response);

		//  Latitude and Longitude from api
		var homeLat = response.results[0].geometry.location.lat;
		var homeLng = response.results[0].geometry.location.lng;
		
		//	Set global homLoc to lat and lng from api
		homeLoc = {lat: homeLat, lng: homeLng};
		
		stateGiver(response);
		
		// Log for testing  delete later ##############
		console.log("homeLoc:");
		console.log(homeLoc);

		initMap();

	});
}

// function intiats googlemap
function initMap() {	
	// Log for testing delete later #########################
	console.log("homeLoc initMap:");
	console.log(homeLoc);

	// sets zoom location
	var map = new google.maps.Map(document.getElementById('map'), {
		zoom: 7,
		//center: homeLoc
		center: homeLoc
});
	// Log for testing delete later #########################
	console.log("campSites initMap");
	console.log(campSites);

	//hard code for testing delete later #########################
	var campSites = [{lat: 33.8794493, lng: -84.5064732}]; 
	
	//  campSites[] from campAPI json object
	for(i=0; i < campSites.length; i++){var marker = new google.maps.Marker({
		position: campSites[i],
		map: map
		});
	};
}

function stateGiver(response) {
  for (p = 0; p < response.results.length; p++) {
    for (j = 0; j < response.results[p].address_components.length; j++) {
      for (h = 0; h < response.results[p].address_components[j].types.length; h++) {
        if (response.results[p].address_components[j].types[h] === "administrative_area_level_1") {
          state = response.results[p].address_components[j].short_name;
      	};
      };
    };
  };
  console.log("stateGiver: ");
  console.log(state);
};


</script>
<!-- End Google Map JS  -->

<!-- Script calling google API and initializing the map -->
<script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDewJP5LDBqFfsHhOFECYVRIjO6wS8uD9U&callback=initMap"> </script>

</body>
</html>
